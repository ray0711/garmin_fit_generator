<div class="control">
  @if (isRepeat()) {
    <form [formGroup]="repeatForm">
      <label>
        Sets
        <input type="number" formControlName="sets" min="1" />
      </label>
    </form>
  }

  @if (isWorkout()) {
    <form [formGroup]="workoutForm" class="form-grid">
      <label class="field">
        <span class="label">Name (original)</span>
        <span class="value" [title]="workoutForm.get('name')?.value">{{ workoutForm.get('name')?.value }}</span>
      </label>
      <label class="field">
        <span class="label">Name override</span>
        <input type="text" formControlName="nameOverride" placeholder="Custom name" />
      </label>

      <label class="field">
        <span class="label">Intensity</span>
        <select formControlName="intensity">
          @for (opt of intensityOptions; track opt.value) {
            <option [value]="opt.value">{{ opt.label }}</option>
          }
        </select>
      </label>

      <fieldset class="target">
        <legend>Target</legend>
        <label class="field">
          <span class="label">Type</span>
          <select formControlName="targetType">
            <option value="time">Time</option>
            <option value="reps">Reps</option>
            <option value="calories">Calories</option>
            <option value="hr">Heart Rate</option>
            <option value="lap">Lap Button</option>
          </select>
        </label>

        @switch (workoutForm.get('targetType')?.value) {
          @case ('time') {
            <label class="field">
              <span class="label">Duration (s)</span>
              <input type="number" formControlName="durationSeconds" min="1" />
            </label>
          }
          @case ('reps') {
            <label class="field">
              <span class="label">Reps</span>
              <input type="number" formControlName="reps" min="1" />
            </label>
            <label class="field">
              <span class="label">Weight</span>
              <input type="number" formControlName="weight" min="0" />
            </label>
          }
          @case ('calories') {
            <label class="field">
              <span class="label">Calories</span>
              <input type="number" formControlName="calories" min="1" />
            </label>
          }
          @case ('hr') {
            <label class="field">
              <span class="label">Heart rate (bpm)</span>
              <input type="number" formControlName="heartRate" min="0" />
            </label>
            <label class="field">
              <span class="label">Type</span>
              <select formControlName="hrType">
                <option value="above">Above</option>
                <option value="below">Below</option>
              </select>
            </label>
          }
          @case ('lap') {
            <p>Advance by pressing Lap button on device.</p>
          }
        }
      </fieldset>
    </form>
  }
</div>
